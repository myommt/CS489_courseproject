<!DOCTYPE html>
<html lang="en" xmlns:th="https://thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head th:replace="~{fragments/head-elements :: headElements}">
    <title>Patient Dashboard</title>
</head>

<body>
    <div id="page-content">
        <header th:replace="~{fragments/header :: header}"></header>
        <main class="container mt-4">
            <div class="page-header text-center mb-4">
                <h1 class="display-4 text-primary">
                    <i class="fas fa-user-circle"></i> Patient Dashboard
                </h1>
                <p class="lead">Welcome, <span sec:authentication="name">Patient</span>!</p>
            </div>

            <!-- Quick Actions -->
            <div class="row mb-4">
                <div class="col-md-4 mb-3">
                    <div class="card text-center">
                        <div class="card-body">
                            <i class="fas fa-calendar-plus fa-3x text-primary mb-3"></i>
                            <h5 class="card-title">Book Appointment</h5>
                            <p class="card-text">Schedule a new online appointment</p>
                            <a th:href="@{/dentalsurgeryapp/rolebase/patient/appointments/new}"
                                class="btn btn-primary">Book Now</a>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 mb-3">
                    <div class="card text-center">
                        <div class="card-body">
                            <i class="fas fa-user-edit fa-3x text-success mb-3"></i>
                            <h5 class="card-title">My Profile</h5>
                            <p class="card-text">View and update your information</p>
                            <a th:href="@{/dentalsurgeryapp/rolebase/patient/profile}" class="btn btn-success">View
                                Profile</a>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 mb-3">
                    <div class="card text-center">
                        <div class="card-body">
                            <i class="fas fa-history fa-3x text-info mb-3"></i>
                            <h5 class="card-title">My Appointments</h5>
                            <p class="card-text">View appointment history</p>
                            <a th:href="@{/dentalsurgeryapp/rolebase/patient/appointments}" class="btn btn-info">View
                                History</a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Recent Appointments -->
            <div class="row">
                <div class="col-12">
                    <div class="card">
                        <div class="card-header">
                            <h5><i class="fas fa-calendar-alt"></i> Recent Appointments</h5>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-striped">
                                    <thead>
                                        <tr>
                                            <th>Date</th>
                                            <th>Time</th>
                                            <th>Dentist</th>
                                            <th>Type</th>
                                            <th>Status</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr th:if="${#lists.isEmpty(recentAppointments)}">
                                            <td colspan="5" class="text-center text-muted">
                                                <i class="fas fa-calendar-times fa-2x mb-2"></i>
                                                <br>No appointments found. <a
                                                    th:href="@{/dentalsurgeryapp/rolebase/patient/appointments/new}">Book
                                                    your
                                                    first appointment!</a>
                                            </td>
                                        </tr>
                                        <tr th:each="appointment : ${recentAppointments}">
                                            <td
                                                th:text="${#temporals.format(appointment.appointmentDateTime, 'MMM dd, yyyy')}">
                                                Date</td>
                                            <td
                                                th:text="${#temporals.format(appointment.appointmentDateTime, 'HH:mm')}">
                                                Time</td>
                                            <td th:text="${appointment.dentist.fullName}">Dr. Smith</td>
                                            <td>
                                                <span class="badge bg-primary">Online</span>
                                            </td>
                                            <td>
                                                <span class="badge bg-success"
                                                    th:if="${appointment.appointmentStatus == 'CONFIRMED'}">Confirmed</span>
                                                <span class="badge bg-warning"
                                                    th:if="${appointment.appointmentStatus == 'PENDING'}">Pending</span>
                                                <span class="badge bg-danger"
                                                    th:if="${appointment.appointmentStatus == 'CANCELLED'}">Cancelled</span>
                                            </td>
                                            <!-- Actions column removed as requested -->
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
        <footer th:replace="~{fragments/footer :: footer}"></footer>
    </div>
</body>

</html>